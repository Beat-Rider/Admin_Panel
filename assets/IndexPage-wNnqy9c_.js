import{g as O,c as T,Q as W,a as $,b as A,d as X,e as i,f as C,h as I}from"./QPage-CF6o7v5V.js";import{c as P,a as x,h as Y,b as G,g as H,q as J,L as Z,r as c,M as B,N as D,O as d,$ as y,R as n,X as _,Q as M,S as N,W as k,C as ee}from"./index-CFGij7_S.js";import{u as le,a as te}from"./format-CpzSwQcR.js";const S=P({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(o,{slots:l}){const s=x(()=>`q-card__section q-card__section--${o.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>Y(o.tag,{class:s.value},G(l.default))}}),ae={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},L={xs:2,sm:4,md:8,lg:16,xl:24},oe=P({name:"QSeparator",props:{...le,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(o){const l=H(),s=te(o,l.proxy.$q),m=x(()=>o.vertical===!0?"vertical":"horizontal"),r=x(()=>` q-separator--${m.value}`),p=x(()=>o.inset!==!1?`${r.value}-${ae[o.inset]}`:""),g=x(()=>`q-separator${r.value}${p.value}`+(o.color!==void 0?` bg-${o.color}`:"")+(s.value===!0?" q-separator--dark":"")),f=x(()=>{const V={};if(o.size!==void 0&&(V[o.vertical===!0?"width":"height"]=o.size),o.spaced!==!1){const w=o.spaced===!0?`${L.md}px`:o.spaced in L?`${L[o.spaced]}px`:o.spaced,b=o.vertical===!0?["Left","Right"]:["Top","Bottom"];V[`margin${b[0]}`]=V[`margin${b[1]}`]=w}return V});return()=>Y("hr",{class:g.value,style:f.value,"aria-orientation":m.value})}});function z(o){if(o===!1)return 0;if(o===!0||o===void 0)return 1;const l=parseInt(o,10);return isNaN(l)?0:l}const ne=J({name:"close-popup",beforeMount(o,{value:l}){const s={depth:z(l),handler(m){s.depth!==0&&setTimeout(()=>{const r=O(o);r!==void 0&&T(r,m,s.depth)})},handlerKey(m){Z(m,13)===!0&&s.handler(m)}};o.__qclosepopup=s,o.addEventListener("click",s.handler),o.addEventListener("keyup",s.handlerKey)},updated(o,{value:l,oldValue:s}){l!==s&&(o.__qclosepopup.depth=z(l))},beforeUnmount(o){const l=o.__qclosepopup;o.removeEventListener("click",l.handler),o.removeEventListener("keyup",l.handlerKey),delete o.__qclosepopup}}),se={class:"q-pa-md",style:{"max-width":"400px",margin:"auto"}},ue={key:0,class:"q-mb-md",style:{display:"flex","justify-content":"center"}},me={__name:"IndexPage",setup(o){const l=c({photo:null,name:"",surname:"",midName:"",callSign:"",b_date:"",place:"",d_date:"",rank:"",lifeStory:"",Latitude:"",Longitude:"",address:"",coords:"",mapLink:""}),s=c(null),m=a=>{a?s.value=URL.createObjectURL(a):s.value=null},r=[a=>!!a||"Поле не може бути порожнім",a=>a.trim().length>=2||"Мінімум 2 літери",a=>/^[А-ЯІЇЄҐ][А-Яа-яІЇЄҐіїєґʼ' -]+$/.test(a)||"Перша Велика. Українська. Дефіс та апостроф дозволені."],p=a=>{let e=l.value[a];e&&(e=e.replace(/[^А-Яа-яІЇЄҐіїєґʼ' -]/g,""),e=e.replace(/\s+/g," ").trim(),e=e.replace(/-{2,}/g,"-"),e=e.replace(/[’']{2,}/g,"'"),e=e.split(" ").map(t=>t.split("-").map(v=>v.charAt(0).toUpperCase()+v.slice(1).toLowerCase()).join("-")).join(" "),l.value[a]=e)},g=c(!1),f=c(!1),V=[a=>!!a||"Поле не може бути порожнім",a=>a.length<=250||"Максимум 250 символів",a=>a.length>=40||"Мінімум 40 символів"];function w(){let a=l.value.coords||"";a=a.replace(/[^0-9, ]/g,"").replace(/\s+/g," ").trim();const e=a.replace(/[^0-9]/g,"");if(e.length>16){const u=e.length-16;a=a.slice(0,a.length-u)}if(/^\d{16}$/.test(a)){const u=Math.floor(a.length/2);a=a.slice(0,u)+" "+a.slice(u)}const t=a.split(/[,\s]+/).slice(0,2),v=u=>{if(!u)return"";let U=u.startsWith("-")?"-":"";return u=U?u.slice(1):u,u=u.replace(/\./g,""),u.length<=2?U+u:U+u.slice(0,2)+"."+u.slice(2)},q=v(t[0]),Q=t[1]!==void 0?v(t[1]):"";l.value.coords=Q?`${q}, ${Q}`:q,R()}const b=c(!1);function R(){const a=l.value.coords,e=/^\d{2}\.\d{2,},\s\d{2}\.\d{2,}$/;if(b.value=e.test(a),b.value){const[t,v]=a.split(",").map(q=>q.trim());l.value.mapLink=`https://www.google.com/maps/search/?api=1&query=${t},${v}`}else l.value.mapLink=""}const j=[a=>a.replace(/[^0-9]/g,"").length>=16||"Мінімум 16 цифр",a=>a.replace(/[^0-9]/g,"").length<=16||"Максимум 16 цифр",a=>/^-?\d{2}\.\d{2,},\s-?\d{2}\.\d{2,}$/.test(a)||"Невірний формат координат"],h=c(!1);function E(){h.value=!0}const K=c([]);function F(){l.value.name&&l.value.surname?(K.value.push({...l.value}),l.value={name:"",surname:"",lifeStory:""}):alert("Будь ласка, заповніть усі обов'язкові поля!")}return(a,e)=>(D(),B(W,{padding:""},{default:d(()=>[y("div",se,[n($,{flat:"",bordered:"",class:"q-pa-lg shadow-2"},{default:d(()=>[n(S,null,{default:d(()=>[y("div",null,[e[26]||(e[26]=y("div",{class:"text-center q-mb-xs",style:{"margin-bottom":"2vh"}}," Заповніть Обов'язкові Поля ",-1)),n(A,{modelValue:l.value.photo,"onUpdate:modelValue":[e[0]||(e[0]=t=>l.value.photo=t),m],accept:"image/*",label:"Оберіть Одне Фото",outlined:"","use-chips":"",style:{"margin-bottom":"2vh"}},null,8,["modelValue"]),s.value?(D(),B(X,{key:0,src:s.value,class:"q-mt-md",style:{"max-width":"300px","border-radius":"8px","margin-bottom":"2vh"}},null,8,["src"])):M("",!0)]),n(i,{modelValue:l.value.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.name=t),label:"Ім'я",type:"text",outlined:"",rules:r,onInput:e[2]||(e[2]=t=>p("name")),class:"q-mb-md"},null,8,["modelValue"]),n(i,{modelValue:l.value.surname,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.surname=t),label:"Прізвище",type:"text",outlined:"",rules:r,onInput:e[4]||(e[4]=t=>p("name")),class:"q-mb-md"},null,8,["modelValue"]),n(i,{modelValue:l.value.midName,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.midName=t),label:"По-Батькові",type:"text",outlined:"",rules:r,onInput:e[6]||(e[6]=t=>p("name")),class:"q-mb-md"},null,8,["modelValue"]),n(i,{modelValue:l.value.callSign,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.callSign=t),label:"Позивний",type:"text",outlined:"",rules:r,onInput:e[8]||(e[8]=t=>p("name")),class:"q-mb-md"},null,8,["modelValue"]),n(i,{modelValue:l.value.b_date,"onUpdate:modelValue":e[9]||(e[9]=t=>l.value.b_date=t),label:"Дата народження",outlined:"",readonly:"",onClick:e[10]||(e[10]=t=>g.value=!0),class:"q-mb-md"},{append:d(()=>[n(N,{name:"event"})]),_:1},8,["modelValue"]),n(C,{modelValue:g.value,"onUpdate:modelValue":e[13]||(e[13]=t=>g.value=t)},{default:d(()=>[n($,null,{default:d(()=>[n(I,{modelValue:l.value.b_date,"onUpdate:modelValue":[e[11]||(e[11]=t=>l.value.b_date=t),e[12]||(e[12]=t=>g.value=!1)],mask:"DD.MM.YYYY"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),n(i,{modelValue:l.value.place,"onUpdate:modelValue":e[14]||(e[14]=t=>l.value.place=t),label:"Місце Народження",type:"text",outlined:"",rules:r,onInput:e[15]||(e[15]=t=>p("name")),class:"q-mb-md"},null,8,["modelValue"]),n(i,{modelValue:l.value.d_date,"onUpdate:modelValue":e[16]||(e[16]=t=>l.value.d_date=t),label:"Дата Смерті",outlined:"",readonly:"",onClick:e[17]||(e[17]=t=>f.value=!0),class:"q-mb-md"},{append:d(()=>[n(N,{name:"event"})]),_:1},8,["modelValue"]),n(C,{modelValue:f.value,"onUpdate:modelValue":e[20]||(e[20]=t=>f.value=t)},{default:d(()=>[n($,null,{default:d(()=>[n(I,{modelValue:l.value.d_date,"onUpdate:modelValue":[e[18]||(e[18]=t=>l.value.d_date=t),e[19]||(e[19]=t=>f.value=!1)],mask:"DD.MM.YYYY"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),n(i,{modelValue:l.value.rank,"onUpdate:modelValue":e[21]||(e[21]=t=>l.value.rank=t),label:"Звання",type:"text",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),n(i,{modelValue:l.value.lifeStory,"onUpdate:modelValue":e[22]||(e[22]=t=>l.value.lifeStory=t),label:"Життєва Історія",type:"textarea",outlined:"",autogrow:"",maxlength:"250",counter:"",rules:V,class:"q-mb-md"},null,8,["modelValue"]),e[29]||(e[29]=y("div",{class:"text-h6 text-center q-mb-md"},"Координати Поховання",-1)),n(i,{modelValue:l.value.coords,"onUpdate:modelValue":[e[23]||(e[23]=t=>l.value.coords=t),w],label:"Координати (Lat, Lng)",outlined:"",rules:j,maxlength:"20",class:"q-mb-s"},{append:d(()=>[n(k,{round:"",dense:"",flat:"",color:"primary",icon:"map",onClick:E,title:"Вибрати На Карті"})]),_:1},8,["modelValue"]),n(C,{modelValue:h.value,"onUpdate:modelValue":e[24]||(e[24]=t=>h.value=t),persistent:""},{default:d(()=>[n($,{style:{width:"90vw","max-width":"1200px",height:"90vh"}},{default:d(()=>[n(S,{class:"row items-center justify-between"},{default:d(()=>[e[27]||(e[27]=y("div",{class:"text-h6"},"Вибір Координат На Мапі",-1)),ee(n(k,{icon:"close",flat:"",round:"",dense:""},null,512),[[ne]])]),_:1}),n(oe),n(S,{class:"q-pa-none",style:{height:"calc(100% - 100px)"}},{default:d(()=>[...e[28]||(e[28]=[y("div",{id:"map",style:{width:"100%",height:"100%"}},null,-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),b.value?(D(),_("div",ue,[n(k,{href:l.value.mapLink,target:"_blank",color:"primary",label:"Відкрити на карті",class:"full-width",style:{"max-width":"400px"}},null,8,["href"])])):M("",!0),n(i,{modelValue:l.value.address,"onUpdate:modelValue":e[25]||(e[25]=t=>l.value.address=t),label:"Адреса Могили",type:"textarea",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),n(k,{label:"Зберегти",color:"primary",onClick:F,class:"full-width"})]),_:1})]),_:1})])]),_:1}))}};export{me as default};
